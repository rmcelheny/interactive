
<!DOCTYPE html>

<html>
<head>

  <title>hito</title>
  
  <style>
  	body {
  		overflow:hidden;
  		margin:none;
  		background-color:lime;
  	}

  	.container {
	  	display:flex;
		flex-direction:row;
		justify-content:center;
		align-items:center;
		position:fixed;
		top:0;
		left:0;
		width:100vw;
		height:100vh;	
  	}

  	#gum-local {
  		/*height:50vh;*/
  		z-index:-11111111;
  	}
  	#canvas {
  		/*height:50vh;*/
  		z-index:0;
  	}

	</style>
</head>

<body>

    <div class="container">
       <video id="gum-local" width="500" height="888" preload autoplay loop muted playsinline></video>
    </div>
    <div class="container">
    	<canvas id="canvas"  width="500" height="888" ></canvas>
    </div>

    <!-- IMAGES HERE -->
	  <div class="image-container" style="opacity: 0;">
	    <img id="image" src="hito.jpg">
	  </div>



	  <!-- web RTC SCRIPTS -->
	  <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
	  <script src="js/common.js"></script>
	  <script src="js/main.js"></script>
	  <!-- tracking.js -->
	  <script src="js/tracking-min.js"></script>
	  <script src="js/face-min.js"></script>

	<script>
	if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)) {
		   		 window.onload = function() {

			      // DEFINE VARIABLES
			      var video = document.getElementById('gum-local');
			      var canvas = document.getElementById('canvas');
			      var context = canvas.getContext('2d');
			      var image = document.getElementById("image");


			      // canvas same size as window
					var positionInfo = video.getBoundingClientRect();
					var height = positionInfo.height;
					var width = positionInfo.width;

					canvas.height = height;
					canvas.width = width;

			      // IMPLEMENT TRACKER
			      var tracker = new tracking.ObjectTracker('face');
			      tracker.setInitialScale(4);
			      tracker.setStepSize(2);
			      tracker.setEdgesDensity(0.1);

			      tracking.track('#gum-local', tracker);

			      tracker.on('track', function(event) {
			        context.clearRect(0, 0, canvas.width, canvas.height);

			      // DRAW TEXT/IMAGE WHEN RECOGNIZED
			        event.data.forEach(function(rect) {
			          context.strokeStyle = 'transparent';
			          context.strokeRect(rect.x, rect.y, rect.width, rect.height);
			          context.font = '14px Helvetica';
			          context.fillStyle = "#fff";
			          context.drawImage(image, rect.x, rect.y, rect.width, rect.height);
			          context.fillText('hito steyerl lecture ', rect.x + rect.width + 5, rect.y + 14);
			          context.fillText('february 21 2018 6:00pm', rect.x + rect.width + 5, rect.y + 28);
			          context.fillText('E.I.K. 26 edgewood', rect.x + rect.width + 5, rect.y + 42);

			        });
			      });

			    };
			} else {
				alert('please access on mobile device');
			}
	  </script>




</body>
</html>
